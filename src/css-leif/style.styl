*
  box-sizing border-box

u($d)
  'calc(%s * var(--unit))' % $d

c($p)
  -webkit-clip-path $p
  clip-path $p

:root
  // 493 x 511
  --coefficient 1vmin
  --size 50
  --min-size 200
  --unit calc((var(--size) / 493) * var(--coefficient))
  --stroke hsl(0, 0%, 5%)
  --lip-color hsla(0, 100%, 85%, 1.2)
  --cheek-color hsla(0, 100%, 75%, 1)
  --cap-color hsla(100, 90%, 40%, 1)
  --eye-shade hsla(20, 20%, 25%, 1.2)
  --fur-color hsla(33, 23%, 62%, 1)
  --face hsla(0, 0%, 95%,1.1)
  --default-petal-color red
  --stroke-border '%s solid var(--stroke)' % u(5)

img
.leif
  height u(511)
  width u(493)
  min-width calc(var(--min-size) * 1px)
  min-height calc((var(--min-size) * (511 / 493)) * 1px)
  position absolute
  top 50%
  left 50%
  transform translate(-50%, -50%)

img
  opacity 0.35

.leif
  background hsla(0, 100%, 50%, 0.25)

  *
  *:after
  *:before
    position absolute

  &__head
    top 13.5%
    width 62%
    height 48%
    left 51.5%
    transform translate(-50%, 0%)
    background var(--fur-color)
    border-radius 50% / 50%
    border var(--stroke-border)

  &__face
    bottom 7%
    left 3%
    height 85%
    width 83.5%
    border-radius 47% 50% 61% 52%/48% 57% 54% 56%
    overflow hidden

    &-border
      height 100%
      width 100%
      div:nth-of-type(1)
        height 74%
        width 47%
        background var(--face)
        border-radius 50%
        top 6%
        left -1%
        transform rotate(17deg)

      div:nth-of-type(2)
        background var(--face)
        top 4%
        transform rotate(-44deg)
        right 4%
        border-radius 50%
        height 84%
        width 51%

      div:nth-of-type(3)
        height 150%
        width 200%
        top 50%
        left 50%
        background var(--face)
        transform translate(-50%, 0)

  &__face-patch
    height 150%
    width 100%
    top 40%
    left 50%
    background var(--face)
    transform translate(-50%, 0)
    c(polygon(0 15%, 8% 2%, 15% 9%, 26% 9%, 31% 0, 50% 0, 53% 11%, 68% 15%, 77% 8%, 100% 42%))

  &__nose
    background var(--lip-color)
    top 50%
    left 27%
    border-radius 50%/50%
    height 16%
    width 18%
    transform rotate(10deg)

    &:after
    &:before
      content ''
      width 13%
      height 34%
      background black
      border-radius 50% / 25%

    &:after
      left 31%
      top 35%

    &:before
      left 59%
      top 37%

  &__cheek
    background var(--cheek-color)
    border-radius 50% 50% 40% 60% / 50% 50% 50% 50%

    &--left
      height 20%
      width 10%
      top 52%
      left 4%

    &--right
      height 20%
      width 16%
      top 62%
      right 18%

  &__mouth-patch
    width 50%
    height 5%
    background var(--face)
    bottom 36%
    left 14%
    transform-origin 0 100%
    transform rotate(5deg)

  &__mouth
    width 45%
    height 26%
    background var(--face)
    bottom 12%
    left 14%
    // overflow hidden
    c(polygon(0 5%, 100% 17%, 100% 100%, 0 100%))

    & > div:nth-of-type(1)
      background var(--lip-color)
      width 150%
      height 200%
      bottom 0
      left 50%
      transform-origin bottom center
      transform translate(-50%, 0) rotate(4deg)
      border-radius 0 0 50% 50%/0 0 100% 100%

    & > div:nth-of-type(2)
      background hsla(0, 0%, 0%, 0.5)
      bottom 21%
      width 133%
      height 200%
      border-radius 0 0 50% 50%/0 0 100% 100%
      left 50%
      transform-origin bottom center
      transform translate(-50%, 0) rotate(4deg)
      overflow hidden
      c(polygon(50% 50%, 87% 100%, 10% 100%))

      &:after
        content ''
        height 10%
        width 26%
        border-radius 50% 50% 0 0 / 100% 100% 0 0
        bottom -2%
        left 50%
        transform translate(-50%, 0)
        background var(--cheek-color)

    & > div:nth-of-type(3)
      background var(--lip-color)
      bottom 43%
      width 185%
      height 200%
      left 50%
      transform-origin bottom center
      transform translate(-50%, 0) rotate(4deg)
      border-radius 0 0 50% 50%/0 0 100% 100%

    & > div:nth-of-type(4)
      background var(--face)
      bottom 62%
      width 185%
      height 200%
      left 50%
      transform-origin bottom center
      transform translate(-50%, 0) rotate(4deg)
      border-radius 0 0 50% 50%/0 0 100% 100%

    & > div:nth-of-type(5)
      left 0%
      top 0
      height 100%
      width 21%
      border-top calc(10 * var(--unit)) solid var(--face)
      border-radius 50%
      transform rotate(-49deg) translate(27%, -5%)
    & > div:nth-of-type(6)
      right 0%
      top 0
      height 100%
      width 24%
      border-top calc(10 * var(--unit)) solid var(--face)
      border-radius 50%
      transform rotate(52deg) translate(0%, 5%)

  &__eye
    &--left
      height 40%
      width 30%
      top 22%
      background var(--face)
      overflow hidden

      & > div
        background var(--eye-shade)
        height 111%
        width 107%
        right 0
        top 0
        border-radius 65% 30% 50% 50% / 78% 36% 50% 0%

        & > div:nth-of-type(1)
          background var(--face)
          height 100%
          width 100%
          border-radius 65% 30% 50% 50% / 78% 36% 50% 0%
          top 29%
          left 6%
          transform rotate(4deg)

        & > div:nth-of-type(2)
          background var(--eye-shade)
          width 68%
          height 68%
          border-radius 50%
          right 0

    &--right
      background var(--face)
      height 45%
      width 52%
      left 50%
      top 31%
      transform rotate(52deg)
      overflow hidden

      & > div
        background var(--eye-shade)
        height 131%
        width 138%
        left 0
        top 3%
        border-radius 50% 50% 0 100% /50% 30% 0 55%
        // overflow hidden

        & > div:nth-of-type(1)
          background var(--face)
          height 109%
          width 87%
          transform rotate(19deg) translate(10%, 19%)
          border-radius 50% 50% 0 0 / 100% 100% 0 0

        & > div:nth-of-type(2)
          background var(--eye-shade)
          height 57%
          width 35%
          border-radius 50%
          top 16%
          left 0

          &:after
            content ''
            height 27%
            width 36%
            border-radius 50%
            border-top calc(5 * var(--unit)) solid var(--eye-shade)
            left 92%
            top 17%
            transform rotate(-60deg)

  &__cap
    height 20%
    width 30%
    background hsla(320, 100%, 50%, 0.2)
    left 39%
    top 1%

    & > div:nth-of-type(1)
      right 0
      top 0
      width 90%
      height 150%
      border-radius 50%
      border var(--stroke-border)
      background var(--cap-color)

      & > div
        background var(--cap-color)
        height 10%
        width 17%
        border-radius 50%
        top 13%
        left 31%
        // z-index 2

      & > div:nth-of-type(1)
        z-index 2

      & > div:nth-of-type(2)
      & > div:nth-of-type(3)
      & > div:nth-of-type(4)
      & > div:nth-of-type(5)
      & > div:nth-of-type(6)
        background hsla(50, 100%, 50%, 1)
        transform translate(calc(var(--x, 0) * 1%), calc(var(--y, 0) * 1%)) rotate(calc(var(--r, 0) * 1deg))

      & > div:nth-of-type(2)
        --x -55
        --y -5

      & > div:nth-of-type(3)
        --x 22
        --y -70
        --r 120
        height 12%

      & > div:nth-of-type(4)
        --x 85
        --y -5
        --r -20
        height 11%

      & > div:nth-of-type(5)
        --x 30
        --y 80
        --r 60
        height 11%
      & > div:nth-of-type(6)
        --x -50
        --y 80
        --r 130
        height 11%



    // Peak/brim
    & > div:nth-of-type(2)
      width 107%
      height 62%
      top 48%
      border var(--stroke-border)
      border-radius 50%
      transform rotate(17deg) translate(-1%, 1%)
      background var(--cap-color)


.flower
  height calc(var(--size, 125) * var(--unit))
  width calc(var(--size, 125) * var(--unit))
  bottom 1%
  left 50%
  transform translate(-50%, 0) translate(calc(var(--x, 0) * 1%), calc(var(--y, 0) * 1%)) rotate(calc(var(--r, 0) * 1deg))

  &__core
    top 50%
    left 50%
    height 30%
    width 30%
    border-radius 50%
    border var(--stroke-border)
    transform translate(-50%, -50%)
    background hsla(60, 100%, 50%, 1)
    transform-style preserve-3d

    &:after
    &:before
      content ''
      height 25%
      width 220%
      background var(--stroke)
      border-radius 5% / 50%
      top 50%
      left 50%
      transform translate3d(-50%, -50%, -1px)

    &:after
      transform translate3d(-50%, -50%, -1px) rotate(90deg)

  &__petal
    height 50%
    width 50%
    top 0
    left 50%
    transform translate(-50%, 0)
    transform-origin 50% 100%
    c(polygon(-50% 0, 50% 100%, 150% 0))

    &:after
      content ''
      width 60%
      left 50%
      height 100%
      border-radius 50%
      border-top u(10) solid var(--petal-color, var(--default-petal-color))
      transform-origin 50% 0
      transform translate(-50%, 0) rotate(180deg) translate(0, -34%)
      c(inset(0 0 80% 0))

    &--0
      transform translate(-50%, 0) rotate(0deg)
    &--1
      transform translate(-50%, 0) rotate(90deg)
    &--2
      transform translate(-50%, 0) rotate(180deg)
    &--3
      transform translate(-50%, 0) rotate(270deg)


    & > div:nth-of-type(1)
      left 50%
      width 60%
      // transform-origin 0 25%
      height 100%
      bottom 0
      border-radius 50% / 25%
      background var(--stroke)
      transform-origin 50% 100%
      transform translate(-50%, 0) rotate(-23deg) translate(0, 0)

    & > div:nth-of-type(2)
      left 50%
      width 60%
      // transform-origin 100% 25%
      height 100%
      border-radius 50% / 25%
      background var(--stroke)
      transform-origin 50% 100%
      transform translate(-50%, 0) rotate(23deg) translate(0, 0)

      &:after
        content ''
        height 100%
        width 100%
        border-top u(10) solid var(--stroke)
        border-radius 50%
        transform-origin 50% 0
        transform rotate(-23deg) rotate(-180deg) translate(65%, -18%)
        c(inset(0 0 81% 0))

    & > div:nth-of-type(3)
      left 50%
      width 100%
      height 100%
      bottom 0
      transform translate(-50%, 0)
      c(polygon(-34% 0, 50% 90%, 134% 0))

      &:after
      &:before
        content ''
        height 100%
        width 43%
        left 50%
        bottom 0
        border-radius 50% / 25%
        background var(--petal-color, var(--default-petal-color))
      &:before
        transform translate(-50%, 0) rotate(37deg) translate(27%, 0%)
      &:after
        transform translate(-50%, 0) rotate(-37deg) translate(-27%, 0%)
